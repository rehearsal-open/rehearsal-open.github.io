---
title: 'バージョン1.202109の概要'
linkTitle: 'バージョン1.202109の概要'
date: 2021-09-14T15:26:25+09:00
type: docs
---

2021年9月に確定したテンプレートファイルの形式です。YAML形式のファイルの入力に対応しています。

## テンプレートファイルのプロパティ
```yaml
version: 1.202109
phase:
- # phase object
- # phase object
  # ...
dir: ./ # default directory
```

### **【必須】**`version`プロパティ（少数）
バージョン情報を設定します。

### **【必須】**`phase`プロパティ（Phaseオブジェクト配列）
フェイズを定義します。詳細およびPhaseオブジェクトのプロパティについては[Phaseオブジェクト](#phaseオブジェクト)をご覧ください。

### 【任意】`dir`プロパティ（パス文字列）
ファイル・ディレクトリの相対パスを参照する際の基準となるパスを指定します。規定値はテンプレートファイルを含んでいるディレクトリのパスです。
このプロパティで相対パスを指定した場合はテンプレートファイルを含んでいるディレクトリのパスを基準にして検索します。

## `Phase`オブジェクト
フェイズを定義します。フェイズの概念については[ドキュメント「フェイズとタスク」](/documents/task-concepts/phase-and-task)をご覧ください。同一フェイズ内に定義されているタスクは並列に実行され、他のフェイズに含まれているタスクは事前または事後に実行されます。
```yaml
phase:
- name: # phase name
　at: # phase order
  task:
  - # task object
  - # task object
    # ...
```

### **【必須】**`name`プロパティ（識別文字列）
フェイズを定義するための識別値です。同一名のフェイズは許可されません。頭文字が英字であり、英数字とアンダーバーである文字列のみ使用できます。

### **【必須】**`task`プロパティ（Taskオブジェクト配列）
タスクを定義します。詳細およびTaskオブジェクトのプロパティについては[Taskオブジェクト](#Taskオブジェクト)をご覧ください。

### 【任意】`at`プロパティ（整数）
実行するタスクの順序を明示します。これを使用することで、より確実な順序の定義を示すことができます。規定値は未定義状態です。テンプレートファイルがYAMLファイルの場合は[gopkg.in/yaml.v3](https://pkg.go.dev/gopkg.in/yaml.v3)を使用しているため、ファイルに記述されている順番に読み取ります。

ただし、`at`プロパティで順序が指定されているフェイズと指定されていないフェイズが混合している場合、`at`プロパティで定義されているものを先に実行します。すべての`at`プロパティが定義されているフェイズが終了してから定義されていないフェイズを実行します。
> `at`プロパティを含むフェイズと含まないフェイズが混合している状態は条件があいまいになり推奨されません。

## `Task`オブジェクト
タスクを定義します。タスクの概念については[ドキュメント「タスクの概念」](/documents/task-concepts)をご覧ください。rehearsalはタスクとそれに紐づくプロセスを実行し、監視します。一部のプロパティは`kind`プロパティによって異なりますが、以下に示すのは共通のプロパティです。

```yaml
task:
- name: # task name
  kind: # task kind
  wait: # waiting for to quit application
  until: # phase when close task
  stdout: # stdout element configration
    # ...: ...
  stderr: # stderr element configuration
    # ...: ...
  # other property is different by `kind` property.
  # ...: ...
```

### **【必須】**`name`プロパティ（識別文字列）
タスクを定義するための識別値です。同一フェイズ内で同一名のタスクは許可されません。異なるフェイズで同一名のタスクは許可されます。頭文字が英字であり、英数字とアンダーバーである文字列のみ使用できます。

### **【必須】**`kind`プロパティ（文字列）
定義するタスクの種類です。サポートされているタスクの種類については[サポートしているタスクの種類](/documents/task-kind/supporting)をご覧ください。

### 【任意】`wait`プロパティ（true/false）
フェイズがタスクの終了を待機するかどうかを指定します。`false`を指定した場合は待機すべき他タスクの終了を確認した際にrehearsalによってそのタスクとプロセスが終了します。タスクの終了条件については[タスクの種類](/documents/task-kind)をご覧ください。

既定では`true`が設定されています。

### 【任意】`until`プロパティ（識別文字列）
タスクの終了を行うフェイズを指定します。詳しくは[ドキュメント「フェイズとタスク」](/documents/task-concepts/)をご覧ください。未定義のフェイズを設定することはできません。

既定ではそのタスクを内包しているフェイズで終了することになっています。

### 【任意】`stdout`プロパティ（TaskElementオブジェクト）
標準出力についてのプロパティです。詳細およびTaskElementオブジェクトのプロパティについては[TaskElementオブジェクト](#TaskElementオブジェクト)をご覧ください。また、標準出力をサポートしているタスクの種類については[タスクの種類](/documents/task-kind)をご覧ください。

規定値はTaskElementオブジェクトのメンバープロパティの規定値が適用されます。

### 【任意】`stderr`プロパティ（TaskElementオブジェクト）
標準エラー出力についてのプロパティです。詳細およびTaskElementオブジェクトのプロパティについては[TaskElementオブジェクト](#TaskElementオブジェクト)をご覧ください。また、標準エラー出力をサポートしているタスクの種類については[タスクの種類/入出力のサポート](/documents/task-kind)をご覧ください。

規定値はTaskElementオブジェクトのメンバープロパティの規定値が適用されます。

## `Task.(kind)`オブジェクト
[Taskオブジェクトのkindプロパティ](#必須kindプロパティ文字列)によってタスクの種類ごとに個別に設定されたプロパティです。

### `Task.cui`オブジェクト
CUIタスクを定義するためのプロパティです。CUIタスクはアプリケーションを実行し、標準入出力を使用して通信します。CUIタスクの詳細は[タスクの種類/CUIタスク](/documents/task-kind#cuiタスク)をご覧ください。
```yaml
task:
- # shared property
  # ...: ...
  cmd: # execute command
  args: # arguments
  - # ...
  - # ....
  dir: # directory
```

#### 【必須】`cmd`プロパティ（文字列）
実行コマンドを指定します。実行ファイルのあるパスやコマンドを指定できます。

#### 【必須】`args`プロパティ（文字列配列）
実行時にアプリケーションへ渡す引数を指定します。

#### 【必須】`dir`プロパティ（パス文字列）


### `Task.serial`オブジェクト
